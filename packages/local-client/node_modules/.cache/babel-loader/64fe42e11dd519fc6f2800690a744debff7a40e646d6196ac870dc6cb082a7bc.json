{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\weraj\\\\OneDrive\\\\Pulpit\\\\ACS\\\\SEM VI\\\\Advanced web techno\\\\PoKompilowane\\\\src\\\\components\\\\preview.tsx\",\n  _s = $RefreshSig$();\nimport './preview.css';\nimport { useRef, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst html = `\n<html>\n  <head>\n    <style>html { background-color: white; } </style>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n    <script>\n      const handleError = (err) => {\n        const root = document.querySelector('#root');\n        root.innerHTML = '<div style=\"color: red;\"><h4>Runtime Error</h4>' + err + '</div>'\n        console.error(err);\n      };\n\n      window.addEventListener('error', (event) => {\n        event.preventDefault();\n        handleError(event.error);\n      });\n\n      window.addEventListener('message', (event) => {\n        try {\n          eval(event.data);\n        } catch (err) {\n          handleError(err);\n        }\n      }, false);\n    </script>\n  </body>\n</html>\n`;\nconst Preview = _ref => {\n  _s();\n  let {\n    code,\n    err\n  } = _ref;\n  const iframe = useRef();\n  useEffect(() => {\n    iframe.current.srcdoc = html;\n    setTimeout(() => {\n      iframe.current.contentWindow.postMessage(code, '*');\n    }, 50);\n  }, [code]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"preview-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n      title: \"preview\",\n      ref: iframe,\n      sandbox: \"allow-scripts\",\n      srcDoc: html\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(Preview, \"GAFleWBZ6O+8Op7dBuDH6PzOglQ=\");\n_c = Preview;\nexport default Preview;\nvar _c;\n$RefreshReg$(_c, \"Preview\");","map":{"version":3,"names":["useRef","useEffect","jsxDEV","_jsxDEV","html","Preview","_ref","_s","code","err","iframe","current","srcdoc","setTimeout","contentWindow","postMessage","className","children","title","ref","sandbox","srcDoc","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/weraj/OneDrive/Pulpit/ACS/SEM VI/Advanced web techno/PoKompilowane/src/components/preview.tsx"],"sourcesContent":["import './preview.css'\r\nimport { useRef, useEffect } from 'react';\r\n\r\ninterface PreviewProps {\r\n  code: string;\r\n  err: string;\r\n}\r\n\r\nconst html = `\r\n<html>\r\n  <head>\r\n    <style>html { background-color: white; } </style>\r\n  </head>\r\n  <body>\r\n    <div id=\"root\"></div>\r\n    <script>\r\n      const handleError = (err) => {\r\n        const root = document.querySelector('#root');\r\n        root.innerHTML = '<div style=\"color: red;\"><h4>Runtime Error</h4>' + err + '</div>'\r\n        console.error(err);\r\n      };\r\n\r\n      window.addEventListener('error', (event) => {\r\n        event.preventDefault();\r\n        handleError(event.error);\r\n      });\r\n\r\n      window.addEventListener('message', (event) => {\r\n        try {\r\n          eval(event.data);\r\n        } catch (err) {\r\n          handleError(err);\r\n        }\r\n      }, false);\r\n    </script>\r\n  </body>\r\n</html>\r\n`;\r\n\r\nconst Preview: React.FC<PreviewProps> = ({code, err}) => {\r\n  const iframe = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    iframe.current.srcdoc = html;\r\n    setTimeout(() => {\r\n      iframe.current.contentWindow.postMessage(code, '*');\r\n    }, 50);\r\n  }, [code]);\r\n\r\n  return (\r\n    <div className=\"preview-wrapper\">\r\n      <iframe\r\n        title=\"preview\" \r\n        ref={iframe} \r\n        sandbox=\"allow-scripts\" \r\n        srcDoc={html}/>\r\n    </div>\r\n    )\r\n};\r\n\r\nexport default Preview;"],"mappings":";;AAAA,OAAO,eAAe;AACtB,SAASA,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAO1C,MAAMC,IAAI,GAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMC,OAA+B,GAAGC,IAAA,IAAiB;EAAAC,EAAA;EAAA,IAAhB;IAACC,IAAI;IAAEC;EAAG,CAAC,GAAAH,IAAA;EAClD,MAAMI,MAAM,GAAGV,MAAM,EAAO;EAE5BC,SAAS,CAAC,MAAM;IACdS,MAAM,CAACC,OAAO,CAACC,MAAM,GAAGR,IAAI;IAC5BS,UAAU,CAAC,MAAM;MACfH,MAAM,CAACC,OAAO,CAACG,aAAa,CAACC,WAAW,CAACP,IAAI,EAAE,GAAG,CAAC;IACrD,CAAC,EAAE,EAAE,CAAC;EACR,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;EAEV,oBACEL,OAAA;IAAKa,SAAS,EAAC,iBAAiB;IAAAC,QAAA,eAC9Bd,OAAA;MACEe,KAAK,EAAC,SAAS;MACfC,GAAG,EAAET,MAAO;MACZU,OAAO,EAAC,eAAe;MACvBC,MAAM,EAAEjB;IAAK;MAAAkB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAE;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACb;AAEV,CAAC;AAAClB,EAAA,CAnBIF,OAA+B;AAAAqB,EAAA,GAA/BrB,OAA+B;AAqBrC,eAAeA,OAAO;AAAC,IAAAqB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}