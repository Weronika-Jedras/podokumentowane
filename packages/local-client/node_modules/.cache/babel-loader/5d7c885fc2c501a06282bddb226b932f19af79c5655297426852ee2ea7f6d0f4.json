{"ast":null,"code":"import * as esbuild from 'esbuild-wasm';\nimport { unpkgPathPlugin } from './plugins/unpkg-path-plugin';\nimport { fetchPlugin } from './plugins/fetch-plugin';\nlet service;\nconst bundle = async rawCode => {\n  if (!service) {\n    service = await esbuild.startService({\n      worker: true,\n      wasmURL: 'https://unpkg.com/esbuild-wasm@0.8.27/esbuild.wasm'\n    });\n  }\n  try {\n    const result = await service.build({\n      entryPoints: ['index.js'],\n      bundle: true,\n      write: false,\n      plugins: [unpkgPathPlugin(), fetchPlugin(rawCode)],\n      define: {\n        'process.env.NODE_ENV': '\"production\"',\n        global: 'window'\n      },\n      jsxFactory: '_React.createElement',\n      jsxFragment: '_React.Fragment'\n    });\n    return {\n      code: result.outputFiles[0].text,\n      err: ''\n    };\n  } catch (err) {\n    if (err instanceof Error) {\n      return {\n        code: \"\",\n        err: err.message\n      };\n    } else {\n      throw err;\n    }\n  }\n};\nexport default bundle;","map":{"version":3,"names":["esbuild","unpkgPathPlugin","fetchPlugin","service","bundle","rawCode","startService","worker","wasmURL","result","build","entryPoints","write","plugins","define","global","jsxFactory","jsxFragment","code","outputFiles","text","err","Error","message"],"sources":["C:/Users/weraj/OneDrive/Pulpit/ACS/SEM VI/Advanced web techno/PoKompilowane/src/bundler/index.ts"],"sourcesContent":["import * as esbuild from 'esbuild-wasm';\r\nimport { unpkgPathPlugin } from './plugins/unpkg-path-plugin';\r\nimport { fetchPlugin } from './plugins/fetch-plugin';\r\n\r\nlet service: esbuild.Service;\r\n\r\nconst bundle = async (rawCode: string) => {\r\n  if (!service){\r\n    service =\r\n      await esbuild.startService({\r\n        worker: true,\r\n        wasmURL: 'https://unpkg.com/esbuild-wasm@0.8.27/esbuild.wasm',\r\n      });\r\n  }\r\n\r\n  try {\r\n    const result = await service.build({\r\n      entryPoints: ['index.js'],\r\n      bundle: true,\r\n      write: false,\r\n      plugins: [unpkgPathPlugin(),\r\n                fetchPlugin(rawCode)],\r\n      define: {\r\n        'process.env.NODE_ENV': '\"production\"',\r\n        global: 'window',\r\n      },\r\n      jsxFactory: '_React.createElement',\r\n      jsxFragment: '_React.Fragment'\r\n    });\r\n\r\n    return {\r\n      code: result.outputFiles[0].text,\r\n      err: ''\r\n    }\r\n  } catch (err) {\r\n    if (err instanceof Error) {\r\n      return {\r\n        code: \"\",\r\n        err: err.message,\r\n      };\r\n    } else {\r\n      throw err;\r\n    }\r\n  }\r\n  \r\n};\r\n\r\nexport default bundle;\r\n"],"mappings":"AAAA,OAAO,KAAKA,OAAO,MAAM,cAAc;AACvC,SAASC,eAAe,QAAQ,6BAA6B;AAC7D,SAASC,WAAW,QAAQ,wBAAwB;AAEpD,IAAIC,OAAwB;AAE5B,MAAMC,MAAM,GAAG,MAAOC,OAAe,IAAK;EACxC,IAAI,CAACF,OAAO,EAAC;IACXA,OAAO,GACL,MAAMH,OAAO,CAACM,YAAY,CAAC;MACzBC,MAAM,EAAE,IAAI;MACZC,OAAO,EAAE;IACX,CAAC,CAAC;EACN;EAEA,IAAI;IACF,MAAMC,MAAM,GAAG,MAAMN,OAAO,CAACO,KAAK,CAAC;MACjCC,WAAW,EAAE,CAAC,UAAU,CAAC;MACzBP,MAAM,EAAE,IAAI;MACZQ,KAAK,EAAE,KAAK;MACZC,OAAO,EAAE,CAACZ,eAAe,EAAE,EACjBC,WAAW,CAACG,OAAO,CAAC,CAAC;MAC/BS,MAAM,EAAE;QACN,sBAAsB,EAAE,cAAc;QACtCC,MAAM,EAAE;MACV,CAAC;MACDC,UAAU,EAAE,sBAAsB;MAClCC,WAAW,EAAE;IACf,CAAC,CAAC;IAEF,OAAO;MACLC,IAAI,EAAET,MAAM,CAACU,WAAW,CAAC,CAAC,CAAC,CAACC,IAAI;MAChCC,GAAG,EAAE;IACP,CAAC;EACH,CAAC,CAAC,OAAOA,GAAG,EAAE;IACZ,IAAIA,GAAG,YAAYC,KAAK,EAAE;MACxB,OAAO;QACLJ,IAAI,EAAE,EAAE;QACRG,GAAG,EAAEA,GAAG,CAACE;MACX,CAAC;IACH,CAAC,MAAM;MACL,MAAMF,GAAG;IACX;EACF;AAEF,CAAC;AAED,eAAejB,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}