{"ast":null,"code":"import'./preview.css';import{useRef,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var html=\"\\n<html>\\n  <head>\\n    <style>html { background-color: #FAF9F6; height: 100%; } </style>\\n  </head>\\n  <body>\\n    <div id=\\\"root\\\"></div>\\n    <script>\\n      const handleError = (err) => {\\n        const root = document.querySelector('#root');\\n        root.innerHTML = '<div style=\\\"color: red;\\\"><h4>Runtime Error</h4>' + err + '</div>'\\n        console.error(err);\\n      };\\n\\n      window.addEventListener('error', (event) => {\\n        event.preventDefault();\\n        handleError(event.error);\\n      });\\n\\n      window.addEventListener('message', (event) => {\\n        try {\\n          eval(event.data);\\n        } catch (err) {\\n          handleError(err);\\n        }\\n      }, false);\\n    </script>\\n  </body>\\n</html>\\n\";var Preview=function Preview(_ref){var code=_ref.code,err=_ref.err;var iframe=useRef();useEffect(function(){iframe.current.srcdoc=html;setTimeout(function(){iframe.current.contentWindow.postMessage(code,'*');},50);},[code]);return/*#__PURE__*/_jsxs(\"div\",{className:\"preview-wrapper\",children:[/*#__PURE__*/_jsx(\"iframe\",{title:\"preview\",ref:iframe,sandbox:\"allow-scripts\",srcDoc:html}),err&&/*#__PURE__*/_jsx(\"div\",{className:\"preview-error\",children:err})]});};export default Preview;","map":{"version":3,"names":["useRef","useEffect","jsx","_jsx","jsxs","_jsxs","html","Preview","_ref","code","err","iframe","current","srcdoc","setTimeout","contentWindow","postMessage","className","children","title","ref","sandbox","srcDoc"],"sources":["C:/Users/weraj/OneDrive/Pulpit/ACS/SEM VI/Advanced web techno/pokodowane/packages/local-client/src/components/preview.tsx"],"sourcesContent":["import './preview.css'\r\nimport { useRef, useEffect } from 'react';\r\nimport { white } from './res/colors';\r\n\r\ninterface PreviewProps {\r\n  code: string;\r\n  err: string;\r\n}\r\n\r\nconst html = `\r\n<html>\r\n  <head>\r\n    <style>html { background-color: #FAF9F6; height: 100%; } </style>\r\n  </head>\r\n  <body>\r\n    <div id=\"root\"></div>\r\n    <script>\r\n      const handleError = (err) => {\r\n        const root = document.querySelector('#root');\r\n        root.innerHTML = '<div style=\"color: red;\"><h4>Runtime Error</h4>' + err + '</div>'\r\n        console.error(err);\r\n      };\r\n\r\n      window.addEventListener('error', (event) => {\r\n        event.preventDefault();\r\n        handleError(event.error);\r\n      });\r\n\r\n      window.addEventListener('message', (event) => {\r\n        try {\r\n          eval(event.data);\r\n        } catch (err) {\r\n          handleError(err);\r\n        }\r\n      }, false);\r\n    </script>\r\n  </body>\r\n</html>\r\n`;\r\n\r\nconst Preview: React.FC<PreviewProps> = ({code, err}) => {\r\n  const iframe = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    iframe.current.srcdoc = html;\r\n    setTimeout(() => {\r\n      iframe.current.contentWindow.postMessage(code, '*');\r\n    }, 50);\r\n  }, [code]);\r\n\r\n  return (\r\n    <div className=\"preview-wrapper\">\r\n      <iframe\r\n        title=\"preview\" \r\n        ref={iframe} \r\n        sandbox=\"allow-scripts\" \r\n        srcDoc={html}\r\n        />\r\n        {err && <div className='preview-error'>{err}</div>}\r\n    </div>\r\n    )\r\n};\r\n\r\nexport default Preview;"],"mappings":"AAAA,MAAO,eAAe,CACtB,OAASA,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAQ1C,GAAM,CAAAC,IAAI,kuBA6BT,CAED,GAAM,CAAAC,OAA+B,CAAG,QAAlC,CAAAA,OAA+BA,CAAAC,IAAA,CAAoB,IAAf,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,GAAG,CAAAF,IAAA,CAAHE,GAAG,CACjD,GAAM,CAAAC,MAAM,CAAGX,MAAM,EAAO,CAE5BC,SAAS,CAAC,UAAM,CACdU,MAAM,CAACC,OAAO,CAACC,MAAM,CAAGP,IAAI,CAC5BQ,UAAU,CAAC,UAAM,CACfH,MAAM,CAACC,OAAO,CAACG,aAAa,CAACC,WAAW,CAACP,IAAI,CAAE,GAAG,CAAC,CACrD,CAAC,CAAE,EAAE,CAAC,CACR,CAAC,CAAE,CAACA,IAAI,CAAC,CAAC,CAEV,mBACEJ,KAAA,QAAKY,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9Bf,IAAA,WACEgB,KAAK,CAAC,SAAS,CACfC,GAAG,CAAET,MAAO,CACZU,OAAO,CAAC,eAAe,CACvBC,MAAM,CAAEhB,IAAK,EACX,CACDI,GAAG,eAAIP,IAAA,QAAKc,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAER,GAAG,EAAO,GAChD,CAEV,CAAC,CAED,cAAe,CAAAH,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}