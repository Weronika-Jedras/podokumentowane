{"ast":null,"code":"import _objectSpread from\"C:/Users/weraj/OneDrive/Pulpit/ACS/SEM VI/Advanced web techno/pokodowane/packages/local-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/weraj/OneDrive/Pulpit/ACS/SEM VI/Advanced web techno/pokodowane/packages/local-client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/weraj/OneDrive/Pulpit/ACS/SEM VI/Advanced web techno/pokodowane/packages/local-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/weraj/OneDrive/Pulpit/ACS/SEM VI/Advanced web techno/pokodowane/packages/local-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Resizable}from\"re-resizable\";import{useEffect,useState}from\"react\";import CodeEditor from'./code-editor';import Preview from'./preview';import'./code-cell.css';import{useActions}from\"../hooks/use-actions\";import{usedTypedSelector}from\"../hooks/use-type-selector\";import{useCumulativeCode}from\"../hooks/use-cumulative-code\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var enable_horizontal={top:false,right:true,bottom:false,left:false,topRight:false,bottomRight:false,bottomLeft:false,topLeft:false};var enable_vertical={top:false,right:false,bottom:true,left:false,topRight:false,bottomRight:false,bottomLeft:false,topLeft:false};var CodeCell=function CodeCell(_ref){var cell=_ref.cell,children=_ref.children;var _useState=useState(window.innerHeight),_useState2=_slicedToArray(_useState,2),innerHeight=_useState2[0],setInnerHeight=_useState2[1];var _useState3=useState(window.innerWidth),_useState4=_slicedToArray(_useState3,2),innerWidth=_useState4[0],setInnerWidth=_useState4[1];var _useState5=useState(window.innerWidth*0.7),_useState6=_slicedToArray(_useState5,2),width=_useState6[0],setWidth=_useState6[1];var _useState7=useState(window.innerHeight*0.2),_useState8=_slicedToArray(_useState7,2),height=_useState8[0],setHeight=_useState8[1];var _useActions=useActions(),updateCell=_useActions.updateCell,createBundle=_useActions.createBundle;var bundle=usedTypedSelector(function(state){return state.bundles[cell.id];});var cumulativeCode=useCumulativeCode(cell.id);useEffect(function(){if(!bundle){createBundle(cell.id,cumulativeCode);return;}var timer=setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:createBundle(cell.id,cumulativeCode);case 1:case\"end\":return _context.stop();}},_callee);})),750);return function(){clearTimeout(timer);};// eslint-disable-nex-line react-hooks/exhaustive-deps\n},[cell.id,cumulativeCode,createBundle]);var resizableProps_horizontal={className:'resize-horizontal',maxWidth:'100%',maxHeight:Infinity,minWidth:150,size:{height:height,width:width},onResizeStop:function onResizeStop(event,direction,refToElement,delta){setWidth(refToElement.offsetWidth);},enable:enable_horizontal,handleClasses:{right:\"handle-horizontal\"}};var resizableProps_vertical={className:\"resize-vertical\",maxWidth:Infinity,maxHeight:innerHeight*0.975,minHeight:43,size:{height:height,width:'100%'},onResize:function onResize(event,direction,refToElement,delta){setHeight(refToElement.offsetHeight);},enable:enable_vertical,handleClasses:{bottom:\"handle-vertical\"},handleWrapperClass:\"handle-wrapper-vertical\"};useEffect(function(){var timer;var listener=function listener(){if(timer){clearTimeout(timer);}timer=setTimeout(function(){setInnerHeight(window.innerHeight);setInnerWidth(window.innerWidth);if(window.innerWidth*0.75<width){setWidth(window.innerWidth*0.75);};},100);};window.addEventListener('resize',listener);return function(){window.removeEventListener('resize',listener);};},[]);return/*#__PURE__*/_jsxs(Resizable,_objectSpread(_objectSpread({},resizableProps_vertical),{},{children:[/*#__PURE__*/_jsx(Resizable,_objectSpread(_objectSpread({},resizableProps_horizontal),{},{children:/*#__PURE__*/_jsx(CodeEditor,{initialValue:cell.content,onChange:function onChange(value){return updateCell(cell.id,value);}})})),/*#__PURE__*/_jsx(\"div\",{className:\"progress-wrapper\",children:!bundle||bundle.loading?/*#__PURE__*/_jsx(\"div\",{className:\"progress-cover\",children:/*#__PURE__*/_jsx(\"progress\",{className:\"progress is-small is-primary\",max:\"100\",children:\"Loading\"})}):/*#__PURE__*/_jsx(Preview,{code:bundle.code,err:bundle.err})})]}));};export default CodeCell;","map":{"version":3,"names":["Resizable","useEffect","useState","CodeEditor","Preview","useActions","usedTypedSelector","useCumulativeCode","jsx","_jsx","jsxs","_jsxs","enable_horizontal","top","right","bottom","left","topRight","bottomRight","bottomLeft","topLeft","enable_vertical","CodeCell","_ref","cell","children","_useState","window","innerHeight","_useState2","_slicedToArray","setInnerHeight","_useState3","innerWidth","_useState4","setInnerWidth","_useState5","_useState6","width","setWidth","_useState7","_useState8","height","setHeight","_useActions","updateCell","createBundle","bundle","state","bundles","id","cumulativeCode","timer","setTimeout","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","clearTimeout","resizableProps_horizontal","className","maxWidth","maxHeight","Infinity","minWidth","size","onResizeStop","event","direction","refToElement","delta","offsetWidth","enable","handleClasses","resizableProps_vertical","minHeight","onResize","offsetHeight","handleWrapperClass","listener","addEventListener","removeEventListener","_objectSpread","initialValue","content","onChange","value","loading","max","code","err"],"sources":["C:/Users/weraj/OneDrive/Pulpit/ACS/SEM VI/Advanced web techno/pokodowane/packages/local-client/src/components/code-cell.tsx"],"sourcesContent":["import { Resizable, Size, Enable, ResizableProps as ResizableProperties } from \"re-resizable\";\r\nimport { useEffect, useState } from \"react\";\r\nimport CodeEditor from './code-editor';\r\nimport Preview from './preview';\r\nimport { theme } from \"./res/colors\";\r\nimport './code-cell.css';\r\nimport { Cell } from '../state';\r\nimport { useActions } from \"../hooks/use-actions\";\r\nimport { usedTypedSelector } from \"../hooks/use-type-selector\";\r\nimport { useCumulativeCode } from \"../hooks/use-cumulative-code\";\r\n\r\n\r\ninterface ResizableProps {\r\n  cell : Cell\r\n  children?: React.ReactNode;\r\n}\r\n\r\n\r\nconst enable_horizontal: Enable = {\r\n  top:false,\r\n  right:true, \r\n  bottom:false, \r\n  left:false, \r\n  topRight:false, \r\n  bottomRight:false, \r\n  bottomLeft:false, \r\n  topLeft:false\r\n}\r\n\r\nconst enable_vertical: Enable = {\r\n  top:false,\r\n  right:false, \r\n  bottom:true, \r\n  left:false, \r\n  topRight:false, \r\n  bottomRight:false, \r\n  bottomLeft:false, \r\n  topLeft:false\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst CodeCell: React.FC<ResizableProps> = ({ cell, children }) => {\r\n  const [innerHeight, setInnerHeight] = useState(window.innerHeight);\r\n  const [innerWidth, setInnerWidth] = useState(window.innerWidth);\r\n  const [width, setWidth] = useState(window.innerWidth * 0.7);\r\n  const [height, setHeight] = useState(window.innerHeight * 0.2);\r\n\r\n  const {updateCell, createBundle} = useActions();\r\n  const bundle = usedTypedSelector((state) => state.bundles[cell.id]);\r\n  const cumulativeCode = useCumulativeCode(cell.id);\r\n  \r\n\r\n  useEffect(() => {\r\n    if (!bundle) {\r\n      createBundle(cell.id, cumulativeCode);\r\n      return;\r\n    }\r\n\r\n    const timer = setTimeout(async () => {\r\n      createBundle(cell.id, cumulativeCode)\r\n    }, 750);\r\n\r\n    return () => {\r\n      clearTimeout(timer);\r\n    }\r\n    // eslint-disable-nex-line react-hooks/exhaustive-deps\r\n  }, [cell.id, cumulativeCode, createBundle]);\r\n\r\n  const resizableProps_horizontal: ResizableProperties = {\r\n    className: 'resize-horizontal',\r\n    maxWidth: '100%',\r\n    maxHeight: Infinity,\r\n    minWidth: 150,\r\n    size: {\r\n      height,\r\n      width\r\n      },\r\n    onResizeStop: (event, direction, refToElement, delta) => {\r\n      setWidth(refToElement.offsetWidth);\r\n    },\r\n    enable: enable_horizontal,\r\n    handleClasses: {right: \"handle-horizontal\"}\r\n  } \r\n  \r\n  const resizableProps_vertical: ResizableProperties = {\r\n    className: \"resize-vertical\",\r\n    maxWidth: Infinity,\r\n    maxHeight: innerHeight * 0.975,\r\n    minHeight: 43,\r\n    size: {\r\n      height,\r\n      width: '100%'\r\n      },\r\n    onResize: (event, direction, refToElement, delta) => {\r\n      setHeight(refToElement.offsetHeight);\r\n    },\r\n    enable: enable_vertical,\r\n    handleClasses: {bottom: \"handle-vertical\"},\r\n    handleWrapperClass: \"handle-wrapper-vertical\"\r\n  } \r\n\r\n  useEffect(() => {\r\n    let timer: any;\r\n    const listener = () => {\r\n      if (timer) {\r\n        clearTimeout(timer);\r\n      }\r\n      timer = setTimeout(() => {\r\n        setInnerHeight(window.innerHeight);\r\n        setInnerWidth(window.innerWidth);\r\n        if (window.innerWidth * 0.75 < width) {\r\n          setWidth(window.innerWidth * 0.75);\r\n        };\r\n      }, 100);\r\n    };\r\n    window.addEventListener('resize', listener);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', listener);\r\n    };\r\n\r\n  }, []);\r\n  \r\n  return (\r\n  <Resizable {...resizableProps_vertical}>\r\n    <Resizable {...resizableProps_horizontal}>\r\n      <CodeEditor \r\n                initialValue={cell.content}\r\n                onChange={(value) => updateCell(cell.id, value)}/>\r\n\r\n    </Resizable>\r\n    <div className=\"progress-wrapper\">\r\n    {\r\n      !bundle || bundle.loading\r\n      ? (\r\n          <div className=\"progress-cover\">\r\n            <progress className=\"progress is-small is-primary\" max=\"100\">\r\n              Loading\r\n            </progress>\r\n          </div>\r\n      ) : (\r\n      <Preview code={bundle.code} err={bundle.err} />\r\n    )}\r\n    </div>\r\n  </Resizable>\r\n  );\r\n\r\n};\r\n\r\nexport default CodeCell;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}