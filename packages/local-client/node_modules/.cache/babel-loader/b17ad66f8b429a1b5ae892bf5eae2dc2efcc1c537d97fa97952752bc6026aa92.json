{"ast":null,"code":"import{produce}from'immer';//import { defaultImport } from \"default-import\";\nimport{ActionType}from\"../action-types\";var initialState={loading:false,error:null,order:[],data:{}};var reducer=produce(function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ActionType.UPDATE_CELL:var _action$payload=action.payload,id=_action$payload.id,content=_action$payload.content;state.data[id].content=content;return state;case ActionType.DELETE_CELL:delete state.data[action.payload];state.order=state.order.filter(function(id){return id!==action.payload;});return state;case ActionType.MOVE_CELL:var direction=action.payload.direction;var index=state.order.findIndex(function(id){return id===action.payload.id;});var targetIndex=direction==='up'?index-1:index+1;if(targetIndex<0||targetIndex>state.order.length-1){return state;}state.order[index]=state.order[targetIndex];state.order[targetIndex]=action.payload.id;return state;case ActionType.INSERT_CELL_AFTER:var cell={content:'',type:action.payload.type,id:randomId()};state.data[cell.id]=cell;var foundIndex=state.order.findIndex(function(id){return id===action.payload.id;});if(foundIndex<0){state.order.unshift(cell.id);}else{state.order.splice(foundIndex+1,0,cell.id);}return state;default:return state;}},initialState);var randomId=function randomId(){return Math.random().toString(36).substring(2,5);};export default reducer;","map":{"version":3,"names":["produce","ActionType","initialState","loading","error","order","data","reducer","state","arguments","length","undefined","action","type","UPDATE_CELL","_action$payload","payload","id","content","DELETE_CELL","filter","MOVE_CELL","direction","index","findIndex","targetIndex","INSERT_CELL_AFTER","cell","randomId","foundIndex","unshift","splice","Math","random","toString","substring"],"sources":["C:/Users/weraj/OneDrive/Pulpit/ACS/SEM VI/Advanced web techno/pokodowane/packages/local-client/src/state/reducers/cellsReducer.ts"],"sourcesContent":["import { produce } from 'immer';\r\n//import { defaultImport } from \"default-import\";\r\nimport { ActionType } from \"../action-types\";\r\nimport { Action } from \"../actions\";\r\nimport { Cell } from \"../cell\";\r\n\r\ninterface CellsState {\r\n  loading: boolean;\r\n  error: string | null;\r\n  order: string[];\r\n  data: {\r\n    [key: string]: Cell\r\n  }\r\n}\r\n\r\nconst initialState: CellsState = {\r\n  loading: false,\r\n  error: null,\r\n  order: [],\r\n  data: {}\r\n};\r\n\r\nconst reducer = produce((state: CellsState = initialState, action: Action) => {\r\n  switch (action.type) {\r\n    case ActionType.UPDATE_CELL:\r\n      const { id, content } = action.payload;\r\n      \r\n      state.data[id].content = content;\r\n      return state;\r\n    case ActionType.DELETE_CELL:\r\n      delete state.data[action.payload];\r\n      state.order = state.order.filter((id) => id !== action.payload);\r\n      return state;\r\n    case ActionType.MOVE_CELL:\r\n      const { direction } = action.payload;\r\n      const index = state.order.findIndex((id) => id === action.payload.id);\r\n      const targetIndex = direction === 'up' ? index -1 : index +1;\r\n\r\n      if (targetIndex < 0 || targetIndex > state.order.length - 1){\r\n        return state;\r\n      }\r\n\r\n      state.order[index] = state.order[targetIndex];\r\n      state.order[targetIndex] = action.payload.id;\r\n\r\n      return state;\r\n    case ActionType.INSERT_CELL_AFTER:\r\n      const cell: Cell = {\r\n        content: '',\r\n        type: action.payload.type,\r\n        id: randomId()\r\n      };\r\n\r\n      state.data[cell.id] = cell;\r\n\r\n      const foundIndex = state.order.findIndex(id => id ===action.payload.id);\r\n\r\n      if (foundIndex < 0){\r\n        state.order.unshift(cell.id);\r\n      } else {\r\n        state.order.splice(foundIndex + 1, 0, cell.id);\r\n      }\r\n\r\n\r\n      return state;\r\n    default:\r\n        return state;\r\n  }\r\n}, initialState);\r\n\r\nconst randomId = () => {\r\n  return Math.random().toString(36).substring(2,5);\r\n};\r\n\r\nexport default reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}