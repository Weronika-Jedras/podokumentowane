{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/weraj/OneDrive/Pulpit/ACS/SEM VI/Advanced web techno/pokodowane/packages/local-client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/weraj/OneDrive/Pulpit/ACS/SEM VI/Advanced web techno/pokodowane/packages/local-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import*as esbuild from'esbuild-wasm';import{unpkgPathPlugin}from'./plugins/unpkg-path-plugin';import{fetchPlugin}from'./plugins/fetch-plugin';var service;var bundle=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(rawCode){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(service){_context.next=4;break;}_context.next=3;return esbuild.startService({worker:true,wasmURL:'https://unpkg.com/esbuild-wasm@0.8.27/esbuild.wasm'});case 3:service=_context.sent;case 4:_context.prev=4;_context.next=7;return service.build({entryPoints:['index.js'],bundle:true,write:false,plugins:[unpkgPathPlugin(),fetchPlugin(rawCode)],define:{'process.env.NODE_ENV':'\"production\"',global:'window'},jsxFactory:'_React.createElement',jsxFragment:'_React.Fragment'});case 7:result=_context.sent;return _context.abrupt(\"return\",{code:result.outputFiles[0].text,err:''});case 11:_context.prev=11;_context.t0=_context[\"catch\"](4);if(!(_context.t0 instanceof Error)){_context.next=17;break;}return _context.abrupt(\"return\",{code:\"\",err:_context.t0.message});case 17:throw _context.t0;case 18:case\"end\":return _context.stop();}},_callee,null,[[4,11]]);}));return function bundle(_x){return _ref.apply(this,arguments);};}();export default bundle;","map":{"version":3,"names":["esbuild","unpkgPathPlugin","fetchPlugin","service","bundle","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","rawCode","result","wrap","_callee$","_context","prev","next","startService","worker","wasmURL","sent","build","entryPoints","write","plugins","define","global","jsxFactory","jsxFragment","abrupt","code","outputFiles","text","err","t0","Error","message","stop","_x","apply","arguments"],"sources":["C:/Users/weraj/OneDrive/Pulpit/ACS/SEM VI/Advanced web techno/pokodowane/packages/local-client/src/bundler/index.ts"],"sourcesContent":["import * as esbuild from 'esbuild-wasm';\r\nimport { unpkgPathPlugin } from './plugins/unpkg-path-plugin';\r\nimport { fetchPlugin } from './plugins/fetch-plugin';\r\n\r\nlet service: esbuild.Service;\r\n\r\nconst bundle = async (rawCode: string) => {\r\n  if (!service){\r\n    service =\r\n      await esbuild.startService({\r\n        worker: true,\r\n        wasmURL: 'https://unpkg.com/esbuild-wasm@0.8.27/esbuild.wasm',\r\n      });\r\n  }\r\n\r\n  try {\r\n    const result = await service.build({\r\n      entryPoints: ['index.js'],\r\n      bundle: true,\r\n      write: false,\r\n      plugins: [unpkgPathPlugin(),\r\n                fetchPlugin(rawCode)],\r\n      define: {\r\n        'process.env.NODE_ENV': '\"production\"',\r\n        global: 'window',\r\n      },\r\n      jsxFactory: '_React.createElement',\r\n      jsxFragment: '_React.Fragment',\r\n    });\r\n\r\n    return {\r\n      code: result.outputFiles[0].text,\r\n      err: ''\r\n    }\r\n  } catch (err) {\r\n    if (err instanceof Error) {\r\n      return {\r\n        code: \"\",\r\n        err: err.message,\r\n      };\r\n    } else {\r\n      throw err;\r\n    }\r\n  }\r\n  \r\n};\r\n\r\nexport default bundle;\r\n"],"mappings":"wXAAA,MAAO,GAAK,CAAAA,OAAO,KAAM,cAAc,CACvC,OAASC,eAAe,KAAQ,6BAA6B,CAC7D,OAASC,WAAW,KAAQ,wBAAwB,CAEpD,GAAI,CAAAC,OAAwB,CAE5B,GAAM,CAAAC,MAAM,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,OAAe,MAAAC,MAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,YAC9Bb,OAAO,EAAAW,QAAA,CAAAE,IAAA,UAAAF,QAAA,CAAAE,IAAA,SAEF,CAAAhB,OAAO,CAACiB,YAAY,CAAC,CACzBC,MAAM,CAAE,IAAI,CACZC,OAAO,CAAE,oDACX,CAAC,CAAC,QAJJhB,OAAO,CAAAW,QAAA,CAAAM,IAAA,QAAAN,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAQc,CAAAb,OAAO,CAACkB,KAAK,CAAC,CACjCC,WAAW,CAAE,CAAC,UAAU,CAAC,CACzBlB,MAAM,CAAE,IAAI,CACZmB,KAAK,CAAE,KAAK,CACZC,OAAO,CAAE,CAACvB,eAAe,EAAE,CACjBC,WAAW,CAACQ,OAAO,CAAC,CAAC,CAC/Be,MAAM,CAAE,CACN,sBAAsB,CAAE,cAAc,CACtCC,MAAM,CAAE,QACV,CAAC,CACDC,UAAU,CAAE,sBAAsB,CAClCC,WAAW,CAAE,iBACf,CAAC,CAAC,QAZIjB,MAAM,CAAAG,QAAA,CAAAM,IAAA,QAAAN,QAAA,CAAAe,MAAA,UAcL,CACLC,IAAI,CAAEnB,MAAM,CAACoB,WAAW,CAAC,CAAC,CAAC,CAACC,IAAI,CAChCC,GAAG,CAAE,EACP,CAAC,UAAAnB,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAoB,EAAA,CAAApB,QAAA,kBAEGA,QAAA,CAAAoB,EAAA,WAAe,CAAAC,KAAK,GAAArB,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAe,MAAA,UACf,CACLC,IAAI,CAAE,EAAE,CACRG,GAAG,CAAEnB,QAAA,CAAAoB,EAAA,CAAIE,OACX,CAAC,gBAAAtB,QAAA,CAAAoB,EAAA,0BAAApB,QAAA,CAAAuB,IAAA,MAAA5B,OAAA,iBAMN,kBAvCK,CAAAL,MAAMA,CAAAkC,EAAA,SAAAjC,IAAA,CAAAkC,KAAA,MAAAC,SAAA,OAuCX,CAED,cAAe,CAAApC,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}